import gevent
from gevent import monkey; monkey.patch_all()

from client.okex import OkexClient
from client.bittrex import BittrexClient


okex = OkexClient()
bx = BittrexClient()

task1 = gevent.spawn(okex.fetch_symbol_balance, 'NEO/USDT')
task2 = gevent.spawn(bx.fetch_symbol_balance, 'NEO/USDT')
gevent.joinall([task1, task2])

print(task1.value)
print(task2.value)

# print(okex.create_limit_buy_order('NEO/USDT', 0.58, 16.92))

# print(okex.fetch_order_book('NEO/USDT'))
# {'bids': [[17.237, 1.0], [17.221, 7.12546], [17.2203, 8.12801], [17.2197, 14.25092], [17.2006, 43.34758]], 'asks': [[17.3265, 61.77637], [17.3438, 1.0], [17.3443, 36.01863], [17.3617, 133.08], [17.3821, 5.539]], 'timestamp': None, 'datetime': None, 'nonce': None}
# print(okex.create_limit_buy_order('NEO/USDT', 11, 18.05))
# {'info': {'result': True, 'order_id': 100911291}, 'id': '100911291', 'timestamp': 1534929117087, 'datetime': '2018-08-22T09:11:57.087Z', 'lastTradeTimestamp': None, 'status': None, 'symbol': 'NEO/USDT', 'type': 'limit', 'side': 'buy', 'price': 18.32, 'amount': 6, 'filled': None, 'remaining': None, 'cost': None, 'trades': None, 'fee': None}
# print(okex.fetch_order('101138494', 'NEO/USDT'))
# {'info': {'amount': 6, 'avg_price': 18.32, 'create_date': 1534929118000, 'deal_amount': 6, 'order_id': 100911291, 'orders_id': 100911291, 'price': 18.32, 'status': 2, 'symbol': 'neo_usdt', 'type': 'buy'}, 'id': '100911291', 'timestamp': 1534929118000, 'datetime': '2018-08-22T09:11:58.000Z', 'lastTradeTimestamp': None, 'symbol': 'NEO/USDT', 'type': 'limit', 'side': 'buy', 'price': 18.32, 'average': 18.32, 'cost': 109.92, 'amount': 6.0, 'filled': 6.0, 'remaining': 0, 'status': 'closed', 'fee': None}
# print(okex.create_limit_sell_order('NEO/USDT', 0.5, 20))
# {'status': 0, 'data': {'order_id': '101138494', 'symbol': 'NEO/USDT', 'side': 'sell', 'price': 20, 'amount': 0.5, 'timestamp': 1534980219813}}
# print(okex.cancel_order('101138494', 'NEO/USDT'))
# {'result': True, 'order_id': '101138494'}

# print(bx.fetch_order_book('NEO/USDT'))
# {'bids': [[16.48187171, 83.17], [16.4818717, 55.13364206], [16.48187164, 5.98324642], [16.48187158, 7.02672252], [16.48187157, 22.20905], [16.47909688, 10.27271], [16.47901199, 0.28449824], [16.45212786, 5.0], [16.43114055, 94.31730242], [16.37256439, 0.139946], [16.37256438, 1576.2], [16.36471614, 4.24542159], [16.34437027, 72.42533923], [16.34437026, 11.52006692], [16.33205203, 3.61377988], [16.28760658, 5.0], [16.12730186, 1576.2], [16.12473052, 5.0], [16.10653247, 0.86392671], [16.06376373, 1576.2], [16.04237597, 1.81379548], [15.96348321, 5.0], [15.9499338, 0.00206676], [15.921, 6.26530997], [15.9, 134.83277329], [15.88578373, 0.28002089], [15.84, 0.5], [15.83000001, 43.91696454], [15.83, 5.0], [15.8, 0.26995464], [15.79, 8.0], [15.78639109, 5.26523498], [15.74490686, 3.27556376], [15.74306945, 63.36121448], [15.7, 47.9592057], [15.69145913, 2.85369806], [15.69, 2.23072021], [15.66, 6.3697318], [15.65410802, 31.86064638], [15.64, 56.01740878], [15.63422253, 0.04272048], [15.62772508, 3.0], [15.61540253, 95.81885558], [15.61, 1.59147842], [15.6, 0.30990573], [15.51185059, 5.0], [15.5, 315.53492397], [15.48672987, 0.04312734], [15.416883, 97.295932], [15.4, 1.13038907], [15.39999999, 3.0], [15.38967, 3.24081023], [15.37, 8.0], [15.353, 10.51765905], [15.3298352, 35.0], [15.31, 200.0], [15.30850956, 7.53503418], [15.3, 108.87149218], [15.29, 11.03328248], [15.27063596, 0.04373764], [15.27000001, 5.0], [15.26324751, 45.0], [15.26, 29.15361784], [15.25, 11.4181955], [15.2, 55.26612702], [15.15806892, 91.11316357], [15.146, 6.58589727], [15.14, 1.0], [15.1, 27.92162585], [15.005, 11.63362213], [15.001, 30.0], [15.0, 1287.74598715], [14.99172024, 0.04455136], [14.95, 33.0], [14.87, 12.07464694], [14.861, 70.0], [14.85, 11.618], [14.8, 0.71014985], [14.73, 38.44707861], [14.70229119, 1.01769852], [14.65000001, 70.0], [14.65, 0.25], [14.64063183, 1.0], [14.62772508, 3.0], [14.6, 0.90314573], [14.57, 3.43682224], [14.54910682, 68.56090977], [14.54, 7.86038514], [14.52, 8.0], [14.51166288, 17.56520016], [14.51, 251.89931488], [14.5, 317.98782026], [14.44619154, 742.50768249], [14.42, 2.0], [14.4, 40.69064869], [14.39, 5.84280946], [14.340857, 20.91923135], [14.33553, 124.7250712], [14.2441, 92.20349356], [14.21, 0.5]], 'asks': [[16.84344256, 183.37], [16.84344257, 11.4336452], [16.84653999, 24.58267249], [16.84654001, 3.81209873], [16.84654007, 22.20905], [16.85536298, 7.617], [16.90367591, 9.80064794], [16.915, 106.0], [16.920372, 44.93978069], [16.95573, 5.0], [16.96248345, 6.0], [16.97, 28.03526917], [16.97071939, 1.80599324], [16.972371, 0.00792898], [16.99, 20.0], [16.99999999, 1576.1], [17.0, 115.56051577], [17.12031325, 24.75], [17.12031329, 14.4], [17.19702031, 0.90712883], [17.28049998, 1.99480841], [17.2805, 3.08823529], [17.3, 234.63657988], [17.34635694, 1120.0], [17.35023702, 1.93672838], [17.35023706, 11.98444827], [17.4, 1.32911041], [17.44842924, 3.38475931], [17.5, 74.56913587], [17.5030517, 30.05769614], [17.6, 196.89], [17.77, 0.2438], [17.78390268, 28.35535103], [17.8, 3.42783743], [17.82, 15.0], [17.855, 1.87932368], [17.9, 0.21366134], [17.90139105, 28.659748], [17.99802031, 0.95248517], [18.08693325, 6.43242045], [18.1, 2.58316384], [18.14222, 29.0], [18.14255335, 5.0], [18.2, 0.46771638], [18.2333255, 0.04125006], [18.23511745, 0.05500009], [18.264286, 0.38324169], [18.2799999, 19.78890437], [18.28, 2.32], [18.297, 4.16137959], [18.3, 437.56664559], [18.350946, 2.16192274], [18.37678003, 0.06241518], [18.37678004, 0.06329205], [18.37975911, 11.31315255], [18.43018327, 13.63926003], [18.43809346, 0.11189521], [18.5, 2000.0], [18.51, 13.13498566], [18.57404675, 0.0396483], [18.6, 0.50136033], [18.62002388, 12.61182455], [18.63849262, 39.5], [18.64, 2.32], [18.71734302, 0.05249811], [18.72084212, 4.55639032], [18.79693494, 0.08858444], [18.8, 141.03840585], [18.82106776, 0.0041775], [18.86692017, 5.0], [18.90679989, 0.04927119], [18.929, 51.2036132], [18.93, 0.3], [18.9384299, 7.20218932], [18.94736332, 12.39797107], [18.98185244, 10.326552], [19.0, 63.23040354], [19.1, 0.17521807], [19.12030504, 2.93760433], [19.17, 2.32], [19.2, 33.29817564], [19.25535456, 32.123086], [19.28, 28.13855919], [19.3396692, 5.0], [19.345, 20.0], [19.35, 5.0], [19.36399959, 0.23204853], [19.36399999, 31.33718139], [19.39432862, 17.01555214], [19.4, 107.41593727], [19.42385422, 27.9655579], [19.46015973, 23.71737006], [19.481, 20.0], [19.49046051, 4.94519129], [19.5, 1460.81623486], [19.51, 0.96499304], [19.512345, 6.78993265], [19.63, 0.5], [19.6517045, 10.58091519], [19.67, 8.0]], 'timestamp': None, 'datetime': None, 'nonce': None}
# print(bx.create_limit_buy_order('NEO/USDT', 0.5, 16.528))
# {'info': {'success': True, 'message': '', 'result': {'uuid': '651c6831-439e-4874-9f96-9308fa2583c2'}}, 'id': '651c6831-439e-4874-9f96-9308fa2583c2', 'symbol': 'NEO/USDT', 'type': 'limit', 'side': 'buy', 'status': 'open'}
# print(bx.fetch_order('651c6831-439e-4874-9f96-9308fa2583c2', 'NEO/USDT'))
# {'info': {'AccountId': None, 'OrderUuid': '651c6831-439e-4874-9f96-9308fa2583c2', 'Exchange': 'USDT-NEO', 'Type': 'LIMIT_BUY', 'Quantity': 0.5, 'QuantityRemaining': 0.5, 'Limit': 16.528, 'Reserved': 8.264, 'ReserveRemaining': 8.264, 'CommissionReserved': 0.02066, 'CommissionReserveRemaining': 0.02066, 'CommissionPaid': 0.0, 'Price': 0.0, 'PricePerUnit': None, 'Opened': '2018-08-22T22:45:22.45', 'Closed': None, 'IsOpen': True, 'Sentinel': 'b142ef42-5f58-4d04-8763-e88e228bac38', 'CancelInitiated': False, 'ImmediateOrCancel': False, 'IsConditional': False, 'Condition': 'NONE', 'ConditionTarget': None}, 'id': '651c6831-439e-4874-9f96-9308fa2583c2', 'timestamp': 1534977922045, 'datetime': '2018-08-22T22:45:22.045Z', 'lastTradeTimestamp': None, 'symbol': 'NEO/USDT', 'type': 'limit', 'side': 'buy', 'price': 16.528, 'cost': 0.0, 'average': None, 'amount': 0.5, 'filled': 0.0, 'remaining': 0.5, 'status': 'open', 'fee': {'cost': 0.0, 'currency': 'USDT'}}
# print(bx.cancel_order('651c6831-439e-4874-9f96-9308fa2583c2', 'NEO/USDT'))
# {'info': {'success': True, 'message': '', 'result': None}, 'id': None, 'timestamp': None, 'datetime': None, 'lastTradeTimestamp': None, 'symbol': None, 'type': 'limit', 'side': None, 'price': None, 'cost': None, 'average': None, 'amount': None, 'filled': None, 'remaining': None, 'status': 'canceled', 'fee': None}
